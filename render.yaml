services:
  # Main Node.js application
  - type: web
    name: lms-week6-web
    env: node
    buildCommand: npm install
    startCommand: node index.js
    envVars:
      - key: PORT
        value: 3000
      - key: WORDPRESS_URL
        fromService:
          type: web
          name: lms-week6-wordpress
          property: host
          envVarKey: WORDPRESS_HOST

  # WordPress service (requires paid plan for Docker)
  # This won't work on free tier, included for reference only
  # - type: web
  #   name: lms-week6-wordpress
  #   env: docker
  #   dockerfilePath: ./wordpress/Dockerfile
  #   envVars:
  #     - key: WORDPRESS_DB_HOST
  #       fromDatabase:
  #         name: wordpress-db
  #         property: host

  # PostgreSQL or MySQL database (paid feature)
  # - type: pserv
  #   name: wordpress-db
  #   env: docker
  #   ...